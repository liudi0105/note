# Java面试题汇总

## Java基础

### 数据库

#### 什么是主键、外键、超键和候选键

**超键**：在关系中能唯一标识元组的属性集称为关系模式的超键。一个属性可以为作超键，多个属性组合在一起也可以作为一个超键。超键包含候选键和主键。

**候选键**：是最小超键，即没有冗余元素的超键。

**主键**：数据库表中对储存数据对象予以唯一和完整标识的数据列或属性的组合。一个数据列只能有一个主键，且主键的取值不能缺失，即不能为空值（NULL）。

**外键**：在一个表中存在另一个表的主键称此表的外键。

#### 什么是存储过程？用什么来调用

存储过程是一个预编译的SQL语句优点是允许模块化的设计，就是谘只需创建一次，以后在该程序中就可以调用多次。如果某次操作需要执行多次SQL，使用存储过程比单纯SQL语句执行要快。

#### 存储过程的优缺点

优点：

* 存储过程是预编译过的，执行效率高
* 存储过程的代码直接存放于数据库中，通过存储过程名直接调用，减少刚和通讯。
* 安全性高，执行存储过程需要有一定权限的用户。
* 存储过程可以重复使用，可减少数据库开发人员的工作量。

缺点：

* 移植性差

#### 什么是视图和游标

视图：是一种虚拟的表，具有和物理表相同的功能。可以对视图进行增、改、查操作，视图通常是一个或多个表的行或列的子集。对视图的修改会影响基本表。它使得我们获取数据更容易，相比多表查询。

游标：是对查询出来的结果作为一个单元来有效地处理。游标可以定在该单元中的特定行，从结果集的当前行检索一千或多选。可以对结果集妆前行做修改。一般不使用游标，但是需要逐条处理数据的时候，游标显得十分重要。

#### 视图的优缺点

优点：

* 简化对数据库的访问，视图可以通过简单的查询得到复杂的结果
* 维护数据的独立性，视图可以从多个表检索数据

缺点：

* 性能：查询视图时，必须把视图的查询转化成对基本表的查询，如果这个视图是由一个复杂的金表查询所定义，那么就无法更改数据

#### 非关系开考数据库和关系型数据库区别，优势比较

非关系型数据 库的优势：

* 性能：NOSQL 是基于键值对的，可以想象成表中的主键和值的对应关系，而且不需要经过SQL层的解析，所以性能非常高。
* 可扩展性：同样也是因为基于键值对，数据之间没有耦合性，所以非常容易水平扩展

其他：
​    对于这两类数据库，对方的优势就是自己的弱势，反之亦然。
​    NOSQL 数据库慢慢开始具备SQL数据库的一些复杂查询功能，比如MongoDB。
​    对于事务的支持也可以用一些系统级的原子操作来实现例如乐观锁之类的方法来曲线救国，比如 Redis set nx。

#### 什么是内连接、外连接、交叉连接、笛卡尔积

内连接：只连接匹配的行

左外连接：包含左边表的全部行（不管右边的表中是否存在与它们匹配的行），以及右边表中全部匹配的行

右外连接：包含右边表的全部行（不管左边的表中是否存在与它们匹配的行），以及左边表中全部匹配的行

全外连接：包含左、右两个表的全部行、不管另外一边的表中是否存在与它们匹配的行。

交叉连接：生成笛卡尔积，它不使用任何匹配或者选取条件，而是直接将一个数据 源中的每个行与另一个数据 源的每个行都一一匹配

#### SQL语言分类

数据查询语言DQL（Data Query Language）

    SELECT

数据操纵语言DML（Data Management Language）

    INSERT, UPDATE, DELETE

数据定义语言（Data Define Language）

    CREATE TABLE/VIEW/INDEX/SYN/CLUSTER

数据控制语言（Data Control Language）

    GRANT, ROLLBACK, COMMIT

#### like中 `%` 和 `_` 的区别

`%` 通配符表示任何字符出现任意次
`_` 通配符表示只能匹配单个字符

注意事项：

* 大小写，有使用模糊匹配时，也就是匹配文本时，MySQL 是可能区分大小的，也可能 是不区分大小写的，这个结果是取决于用户对MySQL的配置方式。
* 注意尾部空格，“%yves”是不能匹配“heyves ”这样的记录的。
* 注意 `NULL`，`%` 通配符可以匹配任意字符，但是不能匹配NULL，也就是说无法匹配到值为 `NULL` 的记录的。

技巧与建议：正如所见，MySQL 的通配符很有用。但这种功能是有代价的，通配符搜索的处理一般要比前面讨论的其他搜索所花时间更长。这是给出一些使用熊本符要记住的技巧。

* 不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符。
* 在确实需要使用通配符时，除非绝对有必要，否则不要把它们用在搜索模式的开始处。把通配符相去不远搜索模式的开始处，搜索起来是最慢的。



## 优化

#### 查询语句不同元素（where、join、limit、group by、having）执行的先后顺序

查询中用到的关键词主要包含六个，并且他们的顺序依次为 select - from - where - group by - having - order by

其中 select 和 from 是必须的，其他关键词是可选的，这六个关键词的顺序与 sql 语句的书写顺序并不一样，而是按照下面的顺序来执行：

from - where - group by - having - select - order by

#### from 后面的表关联，是自右向左解析，而 where 条件的解析顺序是自下而上的

也就是说，在写SQL语句的时候，尽量把数据量小的表放在最右边来进行关联（用小青去匹配大表），而把能筛选出小量数据的条件放在 where 语句的最左边（用小表去匹配大表）

    数据库为每个数据项维护多个版本（快照），每个事务只对属于自己的私有快照进行更新，在事务真正提交前进行有效性检查，使得事务正常提交更新或者失败回滚。
